<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Development and maintenance" href="maintenance.html" /><link rel="prev" title="openEO" href="openeo.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.08.06 -->
        <title>API - FuseTS</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">FuseTS</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">FuseTS</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">FuseTS Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="openeo.html">openEO</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="maintenance.html">Development and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks.html">Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="workshops.html">Workshops</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/api.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h1>
<p>This section contains the API reference, generated from the current state of the source code.</p>
<section id="fusets">
<h2>fusets<a class="headerlink" href="#fusets" title="Permalink to this heading">¶</a></h2>
<section id="module-fusets">
<span id="timeseries-smoothing-integration"></span><h3>Timeseries smoothing &amp; integration<a class="headerlink" href="#module-fusets" title="Permalink to this heading">¶</a></h3>
<p>Library for multi temporal, multi sensor earth observation data integration and analysis.</p>
<dl class="py class">
<dt class="sig sig-object py" id="fusets.WhittakerTransformer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fusets.</span></span><span class="sig-name descname"><span class="pre">WhittakerTransformer</span></span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/whittaker.py#L28-L71"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.WhittakerTransformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#fusets.base.BaseEstimator" title="fusets.base.BaseEstimator"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseEstimator</span></code></a></p>
<p>A transformer that applies whittaker smoothing to an irregular timeseries.</p>
<dl class="py method">
<dt class="sig sig-object py" id="fusets.WhittakerTransformer.fit_transform">
<span class="sig-name descname"><span class="pre">fit_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">fit_params</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/whittaker.py#L34-L71"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.WhittakerTransformer.fit_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Whittaker represents a computationally efficient reconstruction method for smoothing and gap-filling of time series.
The main function takes as input two vectors of the same length: the y time series data (e.g. NDVI) and the
corresponding temporal vector (date format) x, comprised between the start and end dates of a satellite image
collection. Missing or null values as well as the cloud-masked values (i.e. NaN), are handled by introducing a
vector of 0-1 weights w, with wi = 0 for missing observations and wi=1 otherwise. Following, the Whittaker smoother
is applied to the time series profiles, computing therefore a daily smoothing interpolation.</p>
<p>Whittaker’s fast processing speed was assessed through an initial performance testing by comparing different
time series fitting methods. Average runtime takes 0.0107 seconds to process a single NDVI temporal profile.</p>
<p>The smoother performance can be adjusted by tuning the lambda parameter, which penalizes the time series roughness:
the larger lambda the smoother the time series at the cost of the fit to the data getting worse. We found a
lambda of 10000 adequate for obtaining more convenient results. A more detailed description of the algorithm can be
found in the original work of Eilers 2003.</p>
<a class="reference internal image-reference" href="_images/whittaker_rye.svg"><img alt="Comparing smoothing parameter" src="_images/whittaker_rye.svg" width="800" /></a>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> – An input datacube having at least a temporal dimension over which the smoothing will be applied.</p></li>
<li><p><strong>smoothing_lambda</strong> – The smoothing factor.</p></li>
<li><p><strong>time_dimension</strong> – The name of the time dimension of this datacube. Only needs to be specified to resolve ambiguities.</p></li>
<li><p><strong>prediction_period</strong> – The duration specified as ISO-8601, e.g. P5D: 5-daily, P1M: monthly. First date of the time dimension is used as starting point.</p></li>
</ul>
</dd>
</dl>
<p>Returns: A smoothed datacube</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fusets.mogpr">
<span class="sig-prename descclassname"><span class="pre">fusets.</span></span><span class="sig-name descname"><span class="pre">mogpr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'t'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_uncertainties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_raw_inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/mogpr.py#L139-L221"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.mogpr" title="Permalink to this definition">¶</a></dt>
<dd><p>MOGPR (multi-output gaussian-process regression) integrates various timeseries into a single values. This allows to
fill gaps based on other indicators that are correlated with each other.</p>
<p>One example is combining an optical NDVI with a SAR based RVI to compute a gap-filled NDVI.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.1.2.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a></span></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>array</strong> – An input datacube having at least a temporal dimension over which the smoothing will be applied.</p></li>
<li><p><strong>variables</strong> – The list of variable names that should be included, or None to use all variables</p></li>
<li><p><strong>time_dimension</strong> – The name of the time dimension of this datacube. Only needs to be specified to resolve ambiguities.</p></li>
<li><p><strong>prediction_period</strong> – The duration specified as ISO-8601, e.g. P5D: 5-daily, P1M: monthly. Defaults to input dates.</p></li>
<li><p><strong>include_uncertainties</strong> – Flag indicating if the uncertainties should be added to the output of the mogpr process.</p></li>
<li><p><strong>include_raw_inputs</strong> – Flag indicating if the raw inputs should be added to the output of the mogpr process.</p></li>
</ul>
</dd>
</dl>
<p>Returns: A gapfilled datacube.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fusets.whittaker">
<span class="sig-prename descclassname"><span class="pre">fusets.</span></span><span class="sig-name descname"><span class="pre">whittaker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_lambda</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'t'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/whittaker.py#L74-L117"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.whittaker" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method for whittaker. See <code class="xref py py-meth docutils literal notranslate"><span class="pre">fusets.whittaker.WhittakerTransformer.fit_transform()</span></code> for more detailed documentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v2025.1.2.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataArray</span></code></a>, <a class="reference external" href="https://open-eo.github.io/openeo-python-client/api.html#openeo.rest.datacube.DataCube" title="(in openEO Python Client v0.37)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataCube</span></code></a>]</span></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>array</strong> – An input datacube having at least a temporal dimension over which the smoothing will be applied.</p></li>
<li><p><strong>smoothing_lambda</strong> – The smoothing factor.</p></li>
<li><p><strong>time_dimension</strong> – The name of the time dimension of this datacube. Only needs to be specified to resolve ambiguities.</p></li>
<li><p><strong>prediction_period</strong> – The duration specified as ISO-8601, e.g. P5D: 5-daily, P1M: monthly. First date of the time dimension is used as starting point.</p></li>
</ul>
</dd>
</dl>
<p>Returns: A smoothed datacube</p>
</dd></dl>

</section>
<section id="module-fusets.ccdc">
<span id="timeseries-analysis"></span><h3>Timeseries analysis<a class="headerlink" href="#module-fusets.ccdc" title="Permalink to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="fusets.ccdc.ccdc_change_detection">
<span class="sig-prename descclassname"><span class="pre">fusets.ccdc.</span></span><span class="sig-name descname"><span class="pre">ccdc_change_detection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/ccdc.py#L7-L115"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.ccdc.ccdc_change_detection" title="Permalink to this definition">¶</a></dt>
<dd><p>CCDC change detection.
This implementation works on generic timeseries, not on raw Landsat data like the original version.
Therefore, it assumes clear (cloud/shadow free) observations.</p>
<p><a class="reference external" href="https://doi.org/10.1016/j.rse.2015.02.009">Zhe Zhu, Curtis E. Woodcock, Christopher Holden, Zhiqiang Yang, Generating synthetic Landsat images based on all available Landsat data: Predicting Landsat surface reflectance at any given time</a></p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>array:</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the break days</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fusets.ccdc.fit_harmonics_curve">
<span class="sig-prename descclassname"><span class="pre">fusets.ccdc.</span></span><span class="sig-name descname"><span class="pre">fit_harmonics_curve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_coefficients</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/ccdc.py#L118-L154"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.ccdc.fit_harmonics_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit a timeseries model based on fourier harmonics as proposed by CCDC.
This method expects inputs in the [0,10000] range!</p>
<p><a class="reference external" href="https://doi.org/10.1016/j.rse.2015.02.009">Zhe Zhu, Curtis E. Woodcock, Christopher Holden, Zhiqiang Yang, Generating synthetic Landsat images based on all available Landsat data: Predicting Landsat surface reflectance at any given time</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v2025.1.2.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataArray</span></code></a></span>) – DataArray containing timestamped observations in the range [0,10000]</p></li>
<li><p><strong>num_coefficients</strong> – </p></li>
<li><p><strong>time_dimension</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-fusets.peakvalley"></span><dl class="py function">
<dt class="sig sig-object py" id="fusets.peakvalley.peakvalley">
<span class="sig-prename descclassname"><span class="pre">fusets.peakvalley.</span></span><span class="sig-name descname"><span class="pre">peakvalley</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rec_r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slope_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-0.007</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/peakvalley.py#L17-L57"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.peakvalley.peakvalley" title="Permalink to this definition">¶</a></dt>
<dd><p>Algorithm for finding peak-valley patterns in the provided array.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v2025.1.2.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataArray</span></code></a>, <a class="reference external" href="https://open-eo.github.io/openeo-python-client/api.html#openeo.rest.datacube.DataCube" title="(in openEO Python Client v0.37)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataCube</span></code></a>]</span></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>array</strong> – input data array</p></li>
<li><p><strong>drop_thr</strong> – threshold value for the amplitude of the drop in the input feature</p></li>
<li><p><strong>rec_r</strong> – threshold value for the amplitude of the recovery, relative to the <cite>drop_delta</cite></p></li>
<li><p><strong>slope_thr</strong> – threshold value for the slope where the peak should start</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>peak, -1: valley, 0: between peak and valley, np.nan: other}</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>data array with different values {1</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-fusets.analytics"></span><dl class="py function">
<dt class="sig sig-object py" id="fusets.analytics.phenology">
<span class="sig-prename descclassname"><span class="pre">fusets.analytics.</span></span><span class="sig-name descname"><span class="pre">phenology</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/analytics.py#L11-L25"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.analytics.phenology" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes phenology metrics based on the <a class="reference external" href="https://github.com/lewistrotter/PhenoloPy">Phenolopy</a> implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.1.2.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a></span></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>array</strong> – A DataArray containing a vegetation index</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A Dataset with multiple variables corresponding to phenometrics</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-fusets.base">
<span id="base-classes"></span><h3>Base classes<a class="headerlink" href="#module-fusets.base" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="fusets.base.BaseEstimator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">fusets.base.</span></span><span class="sig-name descname"><span class="pre">BaseEstimator</span></span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/base.py#L1-L52"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.base.BaseEstimator" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimator base class</p>
<dl class="py method">
<dt class="sig sig-object py" id="fusets.base.BaseEstimator.fit_transform">
<span class="sig-name descname"><span class="pre">fit_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">fit_params</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/base.py#L35-L52"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.base.BaseEstimator.fit_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit to data, then transform it.
Fits transformer to <cite>X</cite> and <cite>y</cite> with optional parameters <cite>fit_params</cite>
and returns a transformed version of <cite>X</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> – array-like of shape (n_samples, n_features)
Input samples.</p></li>
<li><p><strong>y</strong> – array-like of shape (n_samples,) or (n_samples, n_outputs),                 default=None
Target values (None for unsupervised transformations).</p></li>
<li><p><strong>**fit_params</strong> – Additional fit parameters.</p></li>
</ul>
</dd>
</dl>
<p>Returns: Transformed array.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fusets.base.BaseEstimator.get_params">
<span class="sig-name descname"><span class="pre">get_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/base.py#L6-L17"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.base.BaseEstimator.get_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Get parameters for this estimator.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a></span></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>deep</strong> – If True, will return the parameters for this estimator and
contained subobjects that are estimators.</p>
</dd>
</dl>
<p>Returns: Parameter names mapped to their values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="fusets.base.BaseEstimator.set_params">
<span class="sig-name descname"><span class="pre">set_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/base.py#L19-L33"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.base.BaseEstimator.set_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters of this estimator.
The method works on simple estimators as well as on nested objects
(such as <code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code>). The latter have
parameters of the form <code class="docutils literal notranslate"><span class="pre">&lt;component&gt;__&lt;parameter&gt;</span></code> so that it’s
possible to update each component of a nested object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**params</strong> – Estimator parameters.</p>
</dd>
</dl>
<p>Returns: Estimator instance.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-fusets.openeo">
<span id="fusets-openeo"></span><h3>fusets.openeo<a class="headerlink" href="#module-fusets.openeo" title="Permalink to this heading">¶</a></h3>
<p>This module contains the openEO variants of FuseTS core algorithms. These algorithms are integrated in openEO by using
user defined functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="fusets.openeo.cropsar">
<span class="sig-prename descclassname"><span class="pre">fusets.openeo.</span></span><span class="sig-name descname"><span class="pre">cropsar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spatial_extent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temporal_extent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openeo_connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/openeo/__init__.py#L142-L163"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.openeo.cropsar" title="Permalink to this definition">¶</a></dt>
<dd><p>EXPERIMENTAL may be removed in final version
Method to compute a predicted, cloud-free, NDVI from Sentinel-2 and Sentinel-1 inputs. Depends on openEO service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spatial_extent</strong> – </p></li>
<li><p><strong>temporal_extent</strong> – </p></li>
<li><p><strong>openeo_connection</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fusets.openeo.load_cubes">
<span class="sig-prename descclassname"><span class="pre">fusets.openeo.</span></span><span class="sig-name descname"><span class="pre">load_cubes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collections</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temporal_extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openeo_connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/openeo/__init__.py#L100-L139"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.openeo.load_cubes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an openEO datacube based on a specification. Multiple collections can be specified and will be merged together into a single cube.
The resulting cube will be sampled to the layout of the first collection in the list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collections</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a></span>) – </p></li>
<li><p><strong>spatial_extent</strong> – </p></li>
<li><p><strong>temporal_extent</strong> – </p></li>
<li><p><strong>openeo_connection</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://open-eo.github.io/openeo-python-client/api.html#openeo.rest.datacube.DataCube" title="(in openEO Python Client v0.37)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataCube</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fusets.openeo.mogpr">
<span class="sig-prename descclassname"><span class="pre">fusets.openeo.</span></span><span class="sig-name descname"><span class="pre">mogpr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datacube</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/openeo/__init__.py#L56-L68"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.openeo.mogpr" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>datacube</strong> – input datacube containing the bands to integrate</p>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="fusets.openeo.whittaker">
<span class="sig-prename descclassname"><span class="pre">fusets.openeo.</span></span><span class="sig-name descname"><span class="pre">whittaker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datacube</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_lambda</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Open-EO/FuseTS/blob/v2.0.2a1/fusets/openeo/__init__.py#L19-L43"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#fusets.openeo.whittaker" title="Permalink to this definition">¶</a></dt>
<dd><p>Whittaker represents a computationally efficient reconstruction method for smoothing and gap-filling of time series.
The main function takes as input two vectors of the same length: the y time series data (e.g. NDVI) and the
corresponding temporal vector (date format) x, comprised between the start and end dates of a satellite image
collection. Missing or null values as well as the cloud-masked values (i.e. NaN), are handled by introducing a
vector of 0-1 weights w, with wi = 0 for missing observations and wi=1 otherwise. Following, the Whittaker smoother
is applied to the time series profiles, computing therefore a daily smoothing interpolation.</p>
<p>Whittaker’s fast processing speed was assessed through an initial performance testing by comparing different
time series fitting methods. Average runtime takes 0.0107 seconds to process a single NDVI temporal profile.</p>
<p>The smoother performance can be adjusted by tuning the lambda parameter, which penalizes the time series roughness:
the larger lambda the smoother the time series at the cost of the fit to the data getting worse. We found a
lambda of 10000 adequate for obtaining more convenient results. A more detailed description of the algorithm can be
found in the original work of Eilers 2003.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datacube</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://open-eo.github.io/openeo-python-client/api.html#openeo.rest.datacube.DataCube" title="(in openEO Python Client v0.37)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataCube</span></code></a></span>) – </p></li>
<li><p><strong>smoothing_lambda</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-fusets.openeo.services">
<span id="fusets-openeo-services"></span><h3>fusets.openeo.services<a class="headerlink" href="#module-fusets.openeo.services" title="Permalink to this heading">¶</a></h3>
<p>Builds <a class="reference external" href="https://api.openeo.org/#tag/User-Defined-Processes">openEO user defined processes</a> (UDP’s) based on FuseTS functionality.</p>
<p>For each UDP, a json file containing the full process definition can be found in this module. These json files are generated
by code that is also part of this module. It is possible to manually write and maintain the jsons, but this is not advisable given
the complexity of some process graphs.</p>
<p>For the description of the processes, it is recommended to maintain markdown files that are supported by most editors. When
generating the json definitions, the markdown file content needs to be copied (programmatically).</p>
<p>This is a simple example:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Creating an openEO UDP</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">importlib.resources</span><span class="w"> </span><span class="kn">import</span> <span class="n">files</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">openeo</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">openeo.api.process</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parameter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">openeo.processes</span><span class="w"> </span><span class="kn">import</span> <span class="n">apply_dimension</span><span class="p">,</span> <span class="n">run_udf</span>

<span class="n">description</span> <span class="o">=</span> <span class="n">files</span><span class="p">(</span><span class="s1">&#39;fusets.openeo.services&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;mogpr.md&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="n">input_cube</span> <span class="o">=</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">raster_cube</span><span class="p">()</span>

<span class="n">process</span> <span class="o">=</span> <span class="n">apply_dimension</span><span class="p">(</span><span class="n">input_cube</span><span class="p">,</span><span class="n">process</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">run_udf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">udf</span><span class="o">=</span><span class="s2">&quot;#mogpr&quot;</span><span class="p">,</span> <span class="n">runtime</span><span class="o">=</span><span class="s2">&quot;Python&quot;</span><span class="p">),</span><span class="n">dimension</span><span class="o">=</span><span class="s2">&quot;t&quot;</span><span class="p">)</span>

<span class="n">spec</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;mogpr&quot;</span><span class="p">,</span>
    <span class="s2">&quot;summary&quot;</span><span class="p">:</span> <span class="s2">&quot;Integrates timeseries in data cube using multi-output gaussian process regression.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
    <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">input_cube</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="p">],</span>
    <span class="s2">&quot;process_graph&quot;</span><span class="p">:</span> <span class="n">process</span><span class="o">.</span><span class="n">flat_graph</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1"># write the UDP to a file</span>
<span class="k">with</span> <span class="n">files</span><span class="p">(</span><span class="s1">&#39;fusets.openeo.services&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;mogpr.json&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="maintenance.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Development and maintenance</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="openeo.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">openEO</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Stefaan Lippens
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/Open-EO/FuseTS" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">API</a><ul>
<li><a class="reference internal" href="#fusets">fusets</a><ul>
<li><a class="reference internal" href="#module-fusets">Timeseries smoothing &amp; integration</a><ul>
<li><a class="reference internal" href="#fusets.WhittakerTransformer"><code class="docutils literal notranslate"><span class="pre">WhittakerTransformer</span></code></a><ul>
<li><a class="reference internal" href="#fusets.WhittakerTransformer.fit_transform"><code class="docutils literal notranslate"><span class="pre">WhittakerTransformer.fit_transform()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#fusets.mogpr"><code class="docutils literal notranslate"><span class="pre">mogpr()</span></code></a></li>
<li><a class="reference internal" href="#fusets.whittaker"><code class="docutils literal notranslate"><span class="pre">whittaker()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-fusets.ccdc">Timeseries analysis</a><ul>
<li><a class="reference internal" href="#fusets.ccdc.ccdc_change_detection"><code class="docutils literal notranslate"><span class="pre">ccdc_change_detection()</span></code></a></li>
<li><a class="reference internal" href="#fusets.ccdc.fit_harmonics_curve"><code class="docutils literal notranslate"><span class="pre">fit_harmonics_curve()</span></code></a></li>
<li><a class="reference internal" href="#fusets.peakvalley.peakvalley"><code class="docutils literal notranslate"><span class="pre">peakvalley()</span></code></a></li>
<li><a class="reference internal" href="#fusets.analytics.phenology"><code class="docutils literal notranslate"><span class="pre">phenology()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-fusets.base">Base classes</a><ul>
<li><a class="reference internal" href="#fusets.base.BaseEstimator"><code class="docutils literal notranslate"><span class="pre">BaseEstimator</span></code></a><ul>
<li><a class="reference internal" href="#fusets.base.BaseEstimator.fit_transform"><code class="docutils literal notranslate"><span class="pre">BaseEstimator.fit_transform()</span></code></a></li>
<li><a class="reference internal" href="#fusets.base.BaseEstimator.get_params"><code class="docutils literal notranslate"><span class="pre">BaseEstimator.get_params()</span></code></a></li>
<li><a class="reference internal" href="#fusets.base.BaseEstimator.set_params"><code class="docutils literal notranslate"><span class="pre">BaseEstimator.set_params()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-fusets.openeo">fusets.openeo</a><ul>
<li><a class="reference internal" href="#fusets.openeo.cropsar"><code class="docutils literal notranslate"><span class="pre">cropsar()</span></code></a></li>
<li><a class="reference internal" href="#fusets.openeo.load_cubes"><code class="docutils literal notranslate"><span class="pre">load_cubes()</span></code></a></li>
<li><a class="reference internal" href="#fusets.openeo.mogpr"><code class="docutils literal notranslate"><span class="pre">mogpr()</span></code></a></li>
<li><a class="reference internal" href="#fusets.openeo.whittaker"><code class="docutils literal notranslate"><span class="pre">whittaker()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-fusets.openeo.services">fusets.openeo.services</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=73cda6fb"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>